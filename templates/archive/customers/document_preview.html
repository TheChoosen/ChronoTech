<!-- Document Preview Template -->
<div class="document-preview p-3">
    <div class="d-flex justify-content-between align-items-start mb-3">
        <div>
            <h6 class="mb-1">{{ document.title }}</h6>
            <small class="text-muted">{{ document.filename }} • {{ (document.file_size / 1024)|round(1) }} KB</small>
        </div>
        <div>
            {% if document.is_signed %}
            <span class="badge bg-success">
                <i class="fas fa-check-circle me-1"></i>Signé
            </span>
            {% endif %}
            {% if document.is_confidential %}
            <span class="badge bg-danger">Confidentiel</span>
            {% endif %}
        </div>
    </div>
    
    <div class="document-info mb-3">
        <div class="row">
            <div class="col-md-6">
                <small><strong>Type:</strong> {{ document.document_type|replace('_', ' ')|title }}</small><br>
                {% if document.category %}
                <small><strong>Catégorie:</strong> {{ document.category }}</small><br>
                {% endif %}
                <small><strong>Ajouté le:</strong> {{ document.created_at.strftime('%d/%m/%Y à %H:%M') }}</small><br>
                {% if document.created_by_name %}
                <small><strong>Par:</strong> {{ document.created_by_name }}</small><br>
                {% endif %}
            </div>
            <div class="col-md-6">
                {% if document.is_signed %}
                <small><strong>Signé le:</strong> {{ document.signed_at.strftime('%d/%m/%Y à %H:%M') }}</small><br>
                {% if document.signed_by %}
                <small><strong>Signataire:</strong> {{ document.signed_by }}</small><br>
                {% endif %}
                {% if document.signature_provider %}
                <small><strong>Fournisseur:</strong> {{ document.signature_provider|title }}</small><br>
                {% endif %}
                {% endif %}
                <small><strong>Hash:</strong> {{ document.hash_sha256[:16] }}...</small>
            </div>
        </div>
    </div>
    
    <!-- Aperçu selon le type de fichier -->
    {% set file_ext = document.filename.split('.')[-1].lower() %}
    
    <div class="preview-area bg-light p-3 rounded">
        {% if file_ext in ['jpg', 'jpeg', 'png', 'gif'] %}
            <!-- Aperçu d'image -->
            <div class="text-center">
                <img src="/customers/documents/{{ document.id }}" 
                     alt="{{ document.title }}" 
                     class="img-fluid" 
                     style="max-height: 400px;">
            </div>
        {% elif file_ext == 'pdf' %}
            <!-- Aperçu PDF -->
            <div class="text-center">
                <i class="fas fa-file-pdf fa-4x text-danger mb-3"></i>
                <p>Document PDF</p>
                <p class="text-muted">Cliquez sur "Télécharger" pour voir le contenu complet.</p>
            </div>
        {% elif file_ext in ['doc', 'docx'] %}
            <!-- Aperçu Word -->
            <div class="text-center">
                <i class="fas fa-file-word fa-4x text-primary mb-3"></i>
                <p>Document Word</p>
                <p class="text-muted">Téléchargez le fichier pour le visualiser.</p>
            </div>
        {% elif file_ext in ['xls', 'xlsx'] %}
            <!-- Aperçu Excel -->
            <div class="text-center">
                <i class="fas fa-file-excel fa-4x text-success mb-3"></i>
                <p>Feuille de calcul Excel</p>
                <p class="text-muted">Téléchargez le fichier pour le visualiser.</p>
            </div>
        {% else %}
            <!-- Aperçu générique -->
            <div class="text-center">
                <i class="fas fa-file fa-4x text-secondary mb-3"></i>
                <p>{{ document.mime_type }}</p>
                <p class="text-muted">Aperçu non disponible pour ce type de fichier.</p>
            </div>
        {% endif %}
    </div>
    
    <!-- Métadonnées de sécurité -->
    <div class="mt-3">
        <small class="text-muted">
            <i class="fas fa-shield-alt me-1"></i>
            Document vérifié par empreinte SHA-256. 
            Niveau d'accès: <strong>{{ document.access_level|title }}</strong>
        </small>
    </div>
</div>
