<!-- Modal de Visualisation Détaillée des Bons de Travail -->
<div class="modal fade" id="workOrderDetailsModal" tabindex="-1" aria-labelledby="workOrderDetailsModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="workOrderDetailsModalLabel">
                    <i class="fa-solid fa-file-lines me-2 text-primary"></i>Détails du Bon de Travail
                    <span id="modal-work-order-number" class="badge bg-primary ms-2">#</span>
                </h5>
                <div class="d-flex gap-2 me-3">
                    <button class="btn btn-sm btn-warning" onclick="editWorkOrder()">
                        <i class="fa-solid fa-edit me-1"></i>Modifier
                    </button>
                    <button class="btn btn-sm btn-info" onclick="printWorkOrder()">
                        <i class="fa-solid fa-print me-1"></i>Imprimer
                    </button>
                    <button class="btn btn-sm btn-success" onclick="exportWorkOrderPDF()">
                        <i class="fa-solid fa-file-pdf me-1"></i>PDF
                    </button>
                </div>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fermer"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <!-- Informations Principales -->
                    <div class="col-lg-6 mb-4">
                        <div class="card h-100">
                            <div class="card-header">
                                <h6 class="mb-0">
                                    <i class="fa-solid fa-info-circle me-2 text-primary"></i>Informations Principales
                                </h6>
                            </div>
                            <div class="card-body">
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label class="form-label">Numéro de réclamation</label>
                                        <input type="text" class="form-control" id="detail-claim-number" readonly>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Statut</label>
                                        <select class="form-select" id="detail-status">
                                            <option value="draft">Brouillon</option>
                                            <option value="pending">En attente</option>
                                            <option value="assigned">Assigné</option>
                                            <option value="in_progress">En cours</option>
                                            <option value="completed">Terminé</option>
                                            <option value="cancelled">Annulé</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Priorité</label>
                                        <select class="form-select" id="detail-priority">
                                            <option value="low">Basse</option>
                                            <option value="medium">Moyenne</option>
                                            <option value="high">Haute</option>
                                            <option value="urgent">Urgente</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Date prévue</label>
                                        <input type="datetime-local" class="form-control" id="detail-scheduled-date">
                                    </div>
                                    <div class="col-12">
                                        <label class="form-label">Description</label>
                                        <textarea class="form-control" id="detail-description" rows="3"></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Client et Localisation -->
                    <div class="col-lg-6 mb-4">
                        <div class="card h-100">
                            <div class="card-header">
                                <h6 class="mb-0">
                                    <i class="fa-solid fa-user me-2 text-success"></i>Client et Localisation
                                </h6>
                            </div>
                            <div class="card-body">
                                <div class="row g-3">
                                    <div class="col-12">
                                        <label class="form-label">Nom du client</label>
                                        <input type="text" class="form-control" id="detail-customer-name" readonly>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Téléphone</label>
                                        <input type="tel" class="form-control" id="detail-customer-phone" readonly>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Email</label>
                                        <input type="email" class="form-control" id="detail-customer-email" readonly>
                                    </div>
                                    <div class="col-12">
                                        <label class="form-label">Adresse</label>
                                        <textarea class="form-control" id="detail-customer-address" rows="2"
                                            readonly></textarea>
                                    </div>
                                    <div class="col-12">
                                        <label class="form-label">Adresse d'intervention</label>
                                        <textarea class="form-control" id="detail-location-address" rows="2"></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Assignation Technicien -->
                    <div class="col-lg-6 mb-4">
                        <div class="card h-100">
                            <div class="card-header">
                                <h6 class="mb-0">
                                    <i class="fa-solid fa-user-cog me-2 text-info"></i>Assignation Technicien
                                </h6>
                                <button class="btn btn-sm btn-outline-primary" onclick="showAssignTechnicianModal()">
                                    <i class="fa-solid fa-plus me-1"></i>Assigner
                                </button>
                            </div>
                            <div class="card-body">
                                <div id="assigned-technicians-list">
                                    <div class="text-muted text-center py-3">
                                        <i class="fa-solid fa-user-slash fa-2x mb-2"></i>
                                        <p>Aucun technicien assigné</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Suivi du Temps -->
                    <div class="col-lg-6 mb-4">
                        <div class="card h-100">
                            <div class="card-header">
                                <h6 class="mb-0">
                                    <i class="fa-solid fa-clock me-2 text-warning"></i>Suivi du Temps
                                </h6>
                                <button class="btn btn-sm btn-outline-success" onclick="addTimeEntry()">
                                    <i class="fa-solid fa-plus me-1"></i>Ajouter Temps
                                </button>
                            </div>
                            <div class="card-body">
                                <div class="row g-3 mb-3">
                                    <div class="col-md-6">
                                        <label class="form-label">Durée estimée (min)</label>
                                        <input type="number" class="form-control" id="detail-estimated-duration">
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Coût estimé ($)</label>
                                        <input type="number" class="form-control" id="detail-estimated-cost"
                                            step="0.01">
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Durée réelle (min)</label>
                                        <input type="number" class="form-control" id="detail-actual-duration" readonly>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Coût réel ($)</label>
                                        <input type="number" class="form-control" id="detail-actual-cost" readonly>
                                    </div>
                                </div>
                                <div id="time-entries-list">
                                    <!-- Entrées de temps -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Notes -->
                    <div class="col-12 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h6 class="mb-0">
                                    <i class="fa-solid fa-comment me-2 text-secondary"></i>Notes et Commentaires
                                </h6>
                                <button class="btn btn-sm btn-outline-primary" onclick="addNote()">
                                    <i class="fa-solid fa-plus me-1"></i>Ajouter Note
                                </button>
                            </div>
                            <div class="card-body">
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label class="form-label">Notes générales</label>
                                        <textarea class="form-control" id="detail-notes" rows="4"></textarea>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Notes internes</label>
                                        <textarea class="form-control" id="detail-internal-notes" rows="4"></textarea>
                                    </div>
                                </div>
                                <div class="mt-3" id="work-order-notes-list">
                                    <!-- Liste des notes -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-secondary"
                    onclick="closeWorkOrderDetails()">Fermer</button>
                <button type="button" class="btn btn-primary" onclick="saveWorkOrderDetails()">
                    <i class="fa-solid fa-save me-1"></i>Sauvegarder
                </button>
            </div>
        </div>
    </div>
</div>
